<template>

 <div class="subheader py-2 py-lg-12 subheader-transparent" id="kt_subheader">
							<div class="container d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
								<div class="d-flex align-items-center flex-wrap mr-1">
									<div class="d-flex flex-column">
										<h2 class="text-white font-weight-bold my-2 mr-5"> Form Pengajuan</h2>
                                        
										<div class="d-flex align-items-center font-weight-bold my-2">
										</div>
									</div>
								</div>
							</div>
						</div>
    <div class="content d-flex flex-column flex-column-fluid" id="kt_content">
						<!--begin::Subheader-->
					
						<!--end::Subheader-->
						<!--begin::Entry-->
		<div class="d-flex flex-column-fluid">
							<!--begin::Container-->
							<div class="container mb-13">   
										<!--begin::Card-->
										<div class="card card-custom">
											<div class="card-body">
											
												<div class="container mb-14">
								<!--begin::Row-->
								<div class="row">
									<div class="col-xl-12">
										<!--begin::Nav Panel Widget 1-->
										<div class="card card-custom gutter-b">
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Nav Tabs-->
												<ul class="dashboard-tabs nav nav-pills nav-danger row row-paddingless m-0 p-0 flex-column flex-sm-row" role="tablist">
												
													<li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link active border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_1">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/Layout/Layout-4-blocks.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																			<rect x="0" y="0" width="24" height="24" />
																			<rect fill="#000000" x="4" y="4" width="7" height="7" rx="1.5" />
																			<path d="M5.5,13 L9.5,13 C10.3284271,13 11,13.6715729 11,14.5 L11,18.5 C11,19.3284271 10.3284271,20 9.5,20 L5.5,20 C4.67157288,20 4,19.3284271 4,18.5 L4,14.5 C4,13.6715729 4.67157288,13 5.5,13 Z M14.5,4 L18.5,4 C19.3284271,4 20,4.67157288 20,5.5 L20,9.5 C20,10.3284271 19.3284271,11 18.5,11 L14.5,11 C13.6715729,11 13,10.3284271 13,9.5 L13,5.5 C13,4.67157288 13.6715729,4 14.5,4 Z M14.5,13 L18.5,13 C19.3284271,13 20,13.6715729 20,14.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 L14.5,20 C13.6715729,20 13,19.3284271 13,18.5 L13,14.5 C13,13.6715729 13.6715729,13 14.5,13 Z" fill="#000000" opacity="0.3" />
																		</g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bolder text-center">Pengajuan Izin</span>
														</a>
													</li>
													<li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_2">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/Media/Equalizer.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																			<rect x="0" y="0" width="24" height="24" />
																			<rect fill="#000000" opacity="0.3" x="13" y="4" width="3" height="16" rx="1.5" />
																			<rect fill="#000000" x="8" y="9" width="3" height="11" rx="1.5" />
																			<rect fill="#000000" x="18" y="11" width="3" height="9" rx="1.5" />
																			<rect fill="#000000" x="3" y="13" width="3" height="7" rx="1.5" />
																		</g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bolder text-center">Pengajuan Lembur</span>
														</a>
													</li>
														<li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_5">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/General/Shield-check.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																			<polygon points="0 0 24 0 24 24 0 24" />
																			<path d="M18,14 C16.3431458,14 15,12.6568542 15,11 C15,9.34314575 16.3431458,8 18,8 C19.6568542,8 21,9.34314575 21,11 C21,12.6568542 19.6568542,14 18,14 Z M9,11 C6.790861,11 5,9.209139 5,7 C5,4.790861 6.790861,3 9,3 C11.209139,3 13,4.790861 13,7 C13,9.209139 11.209139,11 9,11 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" />
																			<path d="M17.6011961,15.0006174 C21.0077043,15.0378534 23.7891749,16.7601418 23.9984937,20.4 C24.0069246,20.5466056 23.9984937,21 23.4559499,21 L19.6,21 C19.6,18.7490654 18.8562935,16.6718327 17.6011961,15.0006174 Z M0.00065168429,20.1992055 C0.388258525,15.4265159 4.26191235,13 8.98334134,13 C13.7712164,13 17.7048837,15.2931929 17.9979143,20.2 C18.0095879,20.3954741 17.9979143,21 17.2466999,21 C13.541124,21 8.03472472,21 0.727502227,21 C0.476712155,21 -0.0204617505,20.45918 0.00065168429,20.1992055 Z" fill="#000000" fill-rule="nonzero" />
																		</g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bolder text-center">Pengajuan Cuti</span>
														</a>
													</li>
													<!--end::Item-->
													<!--begin::Item-->
											
													<!--end::Item-->
													<!--begin::Item-->
									
													<li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_3">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/General/Shield-check.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																			<rect x="0" y="0" width="24" height="24" />
																			<path d="M4,4 L11.6314229,2.5691082 C11.8750185,2.52343403 12.1249815,2.52343403 12.3685771,2.5691082 L20,4 L20,13.2830094 C20,16.2173861 18.4883464,18.9447835 16,20.5 L12.5299989,22.6687507 C12.2057287,22.8714196 11.7942713,22.8714196 11.4700011,22.6687507 L8,20.5 C5.51165358,18.9447835 4,16.2173861 4,13.2830094 L4,4 Z" fill="#000000" opacity="0.3" />
																			<path d="M11.1750002,14.75 C10.9354169,14.75 10.6958335,14.6541667 10.5041669,14.4625 L8.58750019,12.5458333 C8.20416686,12.1625 8.20416686,11.5875 8.58750019,11.2041667 C8.97083352,10.8208333 9.59375019,10.8208333 9.92916686,11.2041667 L11.1750002,12.45 L14.3375002,9.2875 C14.7208335,8.90416667 15.2958335,8.90416667 15.6791669,9.2875 C16.0625002,9.67083333 16.0625002,10.2458333 15.6791669,10.6291667 L11.8458335,14.4625 C11.6541669,14.6541667 11.4145835,14.75 11.1750002,14.75 Z" fill="#000000" />
																		</g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bolder text-center">Request Attendance</span>
														</a>
													</li>
															<li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_4">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/General/Shield-check.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																		<rect x="0" y="0" width="24" height="24"/>
																		<path d="M5,19 L20,19 C20.5522847,19 21,19.4477153 21,20 C21,20.5522847 20.5522847,21 20,21 L4,21 C3.44771525,21 3,20.5522847 3,20 L3,4 C3,3.44771525 3.44771525,3 4,3 C4.55228475,3 5,3.44771525 5,4 L5,19 Z" fill="#000000" fill-rule="nonzero"/>
																		<path d="M8.7295372,14.6839411 C8.35180695,15.0868534 7.71897114,15.1072675 7.31605887,14.7295372 C6.9131466,14.3518069 6.89273254,13.7189711 7.2704628,13.3160589 L11.0204628,9.31605887 C11.3857725,8.92639521 11.9928179,8.89260288 12.3991193,9.23931335 L15.358855,11.7649545 L19.2151172,6.88035571 C19.5573373,6.44687693 20.1861655,6.37289714 20.6196443,6.71511723 C21.0531231,7.05733733 21.1271029,7.68616551 20.7848828,8.11964429 L16.2848828,13.8196443 C15.9333973,14.2648593 15.2823707,14.3288915 14.8508807,13.9606866 L11.8268294,11.3801628 L8.7295372,14.6839411 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
																	</g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bolder text-center">Kenaikan Jabatan </span>
														</a>
													</li>
													
													<!--end::Item-->
												</ul>
												<!--end::Nav Tabs-->
												<!--begin::Nav Content-->
												<div class="tab-content m-0 p-0">
													<!-- <div class="tab-pane show active" id="forms_widget_tab_1s" role="tabpanel">
                                                        A
                                                    </div>
													<div class="tab-pane" id="forms_widget_tab_2" role="tabpanel">
                                                        B
                                                    </div>
													<div class="tab-pane" id="forms_widget_tab_3" role="tabpanel">
                                                        C
                                                    </div>
													<div class="tab-pane" id="forms_widget_tab_4" role="tabpanel">
                                                        D
                                                    </div> -->
												</div>
												<!--end::Nav Content-->
											</div>
											<!--end::Body-->
										</div>
                                        
										<!--begin::Nav Panel Widget 1-->
									</div>
                                    
								</div>
                                <div class="tab-content">
									<!-- Tabel Izin -->
                                    <div class="card card-custom tab-pane show active" id="forms_widget_tab_1" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Pengajuan Izin</span>
													<span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Pengajuan Izin di {{ data.nama_perusahaan }}</span>
												</h3>
                                                 <div class="card-toolbar">
													<div class="dropdown dropdown-inline" data-toggle="tooltip" title="" data-placement="left" data-original-title="Quick actions">
														<!--begin::Trigger Modal-->
														<a href="#" class="btn btn-success font-weight-bolder font-size-sm" aria-haspopup="true" aria-expanded="false" @click.prevent="izinModal()">Buat Pengajuan</a>
                                                    </div>
                                                </div>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-9 col-xl-8">
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input type="text" class="form-control form-control-solid" placeholder="Search..." id="kt_datatable_search_query" />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div class="col-md-4 my-2 my-md-0">
																	<select class="form-control form-control-solid" id="kt_datatable_search_status">
																		<option value="">Status</option>
																		<option value="1">Pending</option>
																		<option value="2">Delivered</option>
																		<option value="3">Canceled</option>
																	</select>
																</div>
																<div class="col-md-4 my-2 my-md-0">
																	<select class="form-control form-control-solid" id="kt_datatable_search_type">
																		<option value="">Type</option>
																		<option value="4">Success</option>
																		<option value="5">Info</option>
																		<option value="6">Danger</option>
																	</select>
																</div>
															</div>
														</div>
														<div class="col-lg-3 col-xl-4 mt-5 mt-lg-0">
															<a href="#" class="btn btn-light-primary px-6 font-weight-bold">Search</a>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
												
												<div class="card-body py-0">
													<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
														<thead>
															<tr>
                                                            <th>&nbsp;</th>
                                                            <th>No</th>
                                                            <th>Tanggal</th>
                                                            <th>Jenis Izin</th>
                                                            <th>Bukti Lampiran</th>
															<th>Status</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
														</thead>
														<tbody>
                                                            <tr v-for="(data,index) in allizin.data" :key="data.id">
                                                                    <td>
                                                                        <label class="checkbox-wrap checkbox-success">
                                                                            <input type="checkbox">
                                                                            <span class="checkmark"></span>
                                                                        </label>
                                                                    </td>
                                                                    <td>{{index+1}} </td>
                                                                    <td>{{ data.tanggal }}</td>
                                                                    <td>{{ data.jenis_izin }}</td>
                                                                     <td>
																		  <span class="badge badge-warning">
																			<a style="cursor:pointer;color:white" :href="`files/${data.bukti}`"  target="_blank">Viwe File</a></span>
																	</td>
                                                                     <td>
                                                                        <span class="badge badge-success" v-if="data.status_izin == 'Diterima'" >{{data.status_izin}}</span>
                                                                        <span class="badge badge-danger" v-else-if="data.status_izin == 'Ditolak'" >{{data.status_izin}}</span>
                                                                        <span class="badge badge-warning text-white" v-else-if="data.status_izin == 'Diproses'" >{{data.status_izin}}</span>
                                                                    </td>
                                                                   
                                                                     <td style="text-align: center;">
																	 <div v-if="data.status_izin == 'Diproses'">
																		  <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-edit" data-toggle="modal" @click.prevent="editIzinModal(data)">
                                                                          </a>
                                                                          <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-trash-alt" @click.prevent="hapusIzin(data.id)">
                                                                          </a>
																	 </div>
																	 <div v-else-if="data.status_izin == 'Ditolak'" >
                                                                          <span class="badge badge-secondary">Confirmed</span>
																	 </div>
																	  <div v-else-if="data.status_izin == 'Diterima'" >
                                                                          <span class="badge badge-secondary">Confirmed</span>
																	 </div>
                                                                        
                                                                       
                                                                    </td>
                                                            </tr>
                                                        </tbody>
													</table>
													<div style="margin-top:20px;">
													   <pagination align="right" :data="allizin" @pagination-change-page="allIzinPegawai"></pagination>
													</div>
												</div>
												
												</div>
											
												
												
												<!--end::Datatable-->
											</div>
											
											<!--end::Body-->
										</div>
										
									<!-- Tabel Lembur -->
                                         <div class="card card-custom tab-pane" id="forms_widget_tab_2" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Pengajuan Lembur</span>
													<span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Pengajuan Cuti di {{ data.nama_perusahaan }}</span>
												</h3>
                                                 <div class="card-toolbar">
													<div class="dropdown dropdown-inline" data-toggle="tooltip" title="" data-placement="left" data-original-title="Quick actions">
														<!--begin::Trigger Modal-->
														<a href="#" class="btn btn-success font-weight-bolder font-size-sm" aria-haspopup="true" aria-expanded="false" data-toggle="modal">Buat Pengajuan</a>
                                                    </div>
                                                </div>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-9 col-xl-8">
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input type="text" class="form-control form-control-solid" placeholder="Search..." id="kt_datatable_search_query" />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div class="col-md-4 my-2 my-md-0">
																	<select class="form-control form-control-solid" id="kt_datatable_search_status">
																		<option value="">Status</option>
																		<option value="1">Pending</option>
																		<option value="2">Delivered</option>
																		<option value="3">Canceled</option>
																	</select>
																</div>
																<div class="col-md-4 my-2 my-md-0">
																	<select class="form-control form-control-solid" id="kt_datatable_search_type">
																		<option value="">Type</option>
																		<option value="4">Success</option>
																		<option value="5">Info</option>
																		<option value="6">Danger</option>
																	</select>
																</div>
															</div>
														</div>
														<div class="col-lg-3 col-xl-4 mt-5 mt-lg-0">
															<a href="#" class="btn btn-light-primary px-6 font-weight-bold">Search</a>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
												<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                                                        <thead class="" >
                                                        <tr>
                                                            <th>&nbsp;</th>
                                                            <th>No</th>
                                                            <th>Pegawai</th>
                                                            <th>Nama Pegawai</th>
                                                            <th>Tanggal</th>
                                                            <th>Jam Masuk</th>
                                                            <th>Jam Pulang</th>
                                                            <th>Jam Kerja</th>
                                                            <th>Keterangan</th> 
                                                            <th>Lokasi</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
                                                        </thead>
                                                         <tbody>
                                                            <tr v-for="(data,index) in absensipegawai" :key="data.id">
                                                                    <td>
                                                                        <label class="checkbox-wrap checkbox-success">
                                                                            <input type="checkbox">
                                                                            <span class="checkmark"></span>
                                                                        </label>
                                                                    </td>
                                                                    <td>{{index+1}} </td>
                                                                     <td>
                                                                        <div class="ms-3">
                                                                            <p class="fw-bold mb-1">{{ data.name }}</p>
                                                                            <p class="text-muted mb-0">{{ data.email }}</p>
                                                                        </div>
                                                                    </td>
                                                                    <td>{{ data.nama_lengkap }}</td>
                                                                    <td>{{ data.tanggal }}</td>
                                                                    <td>{{ data.jam_masuk }}</td>
                                                                    <td>{{ data.jam_pulang }}</td>
                                                                    <td>{{ data.jam_kerja }}</td>
                                                                     <td>
                                                                        <span class="badge badge-success" v-if="data.keterangan == 'On Time'" >{{data.keterangan}}</span>
                                                                        <span class="badge badge-danger" v-else-if="data.keterangan == 'Terlambat'" >{{data.keterangan}}</span>
                                                                    </td>
                                                                    <td>{{ data.lokasi }}</td>
                                                                   
                                                                    <td style="text-align: center;">
                                                                          <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-edit" data-toggle="modal" @click.prevent="showModalEdit(data)">
                                                                          </a>
                                                                       
                                                                    </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
									<!-- Tabel Request Attendance	 -->
                                          <div class="card card-custom tab-pane" id="forms_widget_tab_3" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Request Attendance</span>
													<span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Pengajuan Request Attendance di {{ data.nama_perusahaan }}</span>
												</h3>
                                                <div class="card-toolbar">
													<div class="dropdown dropdown-inline" data-toggle="tooltip" title="" data-placement="left" data-original-title="Quick actions">
														<!--begin::Trigger Modal-->
														<a href="#" class="btn btn-success font-weight-bolder font-size-sm" aria-haspopup="true" aria-expanded="false" @click.prevent="reqModal()">Buat Pengajuan</a>
                                                    </div>
                                                </div>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-9 col-xl-8">
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input type="text" class="form-control form-control-solid" placeholder="Search..." id="kt_datatable_search_query" />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div class="col-md-4 my-2 my-md-0">
																	<select class="form-control form-control-solid" id="kt_datatable_search_status">
																		<option value="">Status</option>
																		<option value="1">Pending</option>
																		<option value="2">Delivered</option>
																		<option value="3">Canceled</option>
																	</select>
																</div>
																<div class="col-md-4 my-2 my-md-0">
																	<select class="form-control form-control-solid" id="kt_datatable_search_type">
																		<option value="">Type</option>
																		<option value="4">Success</option>
																		<option value="5">Info</option>
																		<option value="6">Danger</option>
																	</select>
																</div>
															</div>
														</div>
														<div class="col-lg-3 col-xl-4 mt-5 mt-lg-0">
															<a href="#" class="btn btn-light-primary px-6 font-weight-bold">Search</a>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
												<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                                                        <thead class="" >
                                                        <tr>
                                                            <th>&nbsp;</th>
                                                            <th>No</th>
                                                            <th>Tanggal</th>
                                                            <th>Alasan</th>
                                                            <th>Bukti Pendukung</th>
															<th>Status</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
                                                        </thead>
                                                         <tbody>
                                                            <tr v-for="(data,index) in allreqabsen" :key="data.id">
                                                                    <td>
                                                                        <label class="checkbox-wrap checkbox-success">
                                                                            <input type="checkbox">
                                                                            <span class="checkmark"></span>
                                                                        </label>
                                                                    </td>
                                                                    <td>{{index+1}} </td>
                                                                    <td>{{ data.tanggal_req }}</td>
                                                                    <td>{{ data.alasan }}</td>
                                                                    <td>
																		  <span class="badge badge-warning">
																			<a style="cursor:pointer;color:white" :href="`files/${data.bukti_pendukung}`"  target="_blank">Viwe File</a></span>
																	</td>
                                                                     <td>
                                                                        <span class="badge badge-success" v-if="data.status_req == 'Diterima'" >{{data.status_req}}</span>
                                                                        <span class="badge badge-danger" v-else-if="data.status_req == 'Ditolak'" >{{data.status_req}}</span>
                                                                        <span class="badge badge-warning text-white" v-else-if="data.status_req == 'Diproses'" >{{data.status_req}}</span>
                                                                    </td>
                                                                   
                                                                     <td style="text-align: center;">
																	 <div v-if="data.status_req == 'Diproses'">
																		  <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-edit" data-toggle="modal" @click.prevent="editReqModal(data)">
                                                                          </a>
                                                                          <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-trash-alt" @click.prevent="hapusReq(data.uid)">
                                                                          </a>
																	 </div>
																	 <div v-else-if="data.status_req == 'Ditolak'" >
                                                                          <span class="badge badge-secondary">Confirmed</span>
																	 </div>
																	  <div v-else-if="data.status_req == 'Diterima'" >
                                                                          <span class="badge badge-secondary">Confirmed</span>
																	 </div>
                                                                        
                                                                       
                                                                    </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
									<!-- Tabel Kenaikan Jabatan 	 -->
                                          <div class="card card-custom tab-pane" id="forms_widget_tab_4" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Kenaikan Jabatan</span>
													<span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Pengajuan Kenaikan jabatan di {{ data.nama_perusahaan }}</span>
												</h3>
                                                 <div class="card-toolbar">
													<div class="dropdown dropdown-inline" data-toggle="tooltip" title="" data-placement="left" data-original-title="Quick actions">
														<!--begin::Trigger Modal-->
														<a href="#" class="btn btn-success font-weight-bolder font-size-sm" aria-haspopup="true" aria-expanded="false" data-toggle="modal">Buat Pengajuan</a>
                                                    </div>
                                                </div>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-9 col-xl-8">
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input type="text" class="form-control form-control-solid" placeholder="Search..." id="kt_datatable_search_query" />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div class="col-md-4 my-2 my-md-0">
																	<select class="form-control form-control-solid" id="kt_datatable_search_status">
																		<option value="">Status</option>
																		<option value="1">Pending</option>
																		<option value="2">Delivered</option>
																		<option value="3">Canceled</option>
																	</select>
																</div>
																<div class="col-md-4 my-2 my-md-0">
																	<select class="form-control form-control-solid" id="kt_datatable_search_type">
																		<option value="">Type</option>
																		<option value="4">Success</option>
																		<option value="5">Info</option>
																		<option value="6">Danger</option>
																	</select>
																</div>
															</div>
														</div>
														<div class="col-lg-3 col-xl-4 mt-5 mt-lg-0">
															<a href="#" class="btn btn-light-primary px-6 font-weight-bold">Search</a>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
												<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                                                        <thead class="" >
                                                        <tr>
                                                            <th>&nbsp;</th>
                                                            <th>No</th>
                                                            <th>Pegawai</th>
                                                            <th>Nama Pegawai</th>
                                                            <th>Tanggal</th>
                                                            <th>Jam Masuk</th>
                                                            <th>Jam Pulang</th>
                                                            <th>Jam Kerja</th>
                                                            <th>Keterangan</th> 
                                                            <th>Lokasi</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
                                                        </thead>
                                                         <tbody>
                                                            <tr v-for="(data,index) in absensipegawai" :key="data.id">
                                                                    <td>
                                                                        <label class="checkbox-wrap checkbox-success">
                                                                            <input type="checkbox">
                                                                            <span class="checkmark"></span>
                                                                        </label>
                                                                    </td>
                                                                    <td>{{index+1}} </td>
                                                                     <td>
                                                                        <div class="ms-3">
                                                                            <p class="fw-bold mb-1">{{ data.name }}</p>
                                                                            <p class="text-muted mb-0">{{ data.email }}</p>
                                                                        </div>
                                                                    </td>
                                                                    <td>{{ data.nama_lengkap }}</td>
                                                                    <td>{{ data.tanggal }}</td>
                                                                    <td>{{ data.jam_masuk }}</td>
                                                                    <td>{{ data.jam_pulang }}</td>
                                                                    <td>{{ data.jam_kerja }}</td>
                                                                     <td>
                                                                        <span class="badge badge-success" v-if="data.keterangan == 'On Time'" >{{data.keterangan}}</span>
                                                                        <span class="badge badge-danger" v-else-if="data.keterangan == 'Terlambat'" >{{data.keterangan}}</span>
                                                                    </td>
                                                                    <td>{{ data.lokasi }}</td>
                                                                   
                                                                    <td style="text-align: center;">
                                                                          <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-edit" data-toggle="modal" @click.prevent="showModalEdit(data)">
                                                                          </a>
                                                                       
                                                                    </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
									<!-- Tabel Pengajuan Cuti	 -->
										 <div class="card card-custom tab-pane" id="forms_widget_tab_5" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Pengajuan Cuti</span>
													<span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Pengajuan Cuti di {{ data.nama_perusahaan }}</span>
												</h3>
                                                 <div class="card-toolbar">
													<div class="dropdown dropdown-inline" data-toggle="tooltip" title="" data-placement="left" data-original-title="Quick actions">
														<!--begin::Trigger Modal-->
														<a href="#" class="btn btn-success font-weight-bolder font-size-sm" aria-haspopup="true" aria-expanded="false" data-toggle="modal">Buat Pengajuan</a>
                                                    </div>
                                                </div>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-9 col-xl-8">
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input type="text" class="form-control form-control-solid" placeholder="Search..." id="kt_datatable_search_query" />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div class="col-md-4 my-2 my-md-0">
																	<select class="form-control form-control-solid" id="kt_datatable_search_status">
																		<option value="">Status</option>
																		<option value="1">Pending</option>
																		<option value="2">Delivered</option>
																		<option value="3">Canceled</option>
																	</select>
																</div>
																<div class="col-md-4 my-2 my-md-0">
																	<select class="form-control form-control-solid" id="kt_datatable_search_type">
																		<option value="">Type</option>
																		<option value="4">Success</option>
																		<option value="5">Info</option>
																		<option value="6">Danger</option>
																	</select>
																</div>
															</div>
														</div>
														<div class="col-lg-3 col-xl-4 mt-5 mt-lg-0">
															<a href="#" class="btn btn-light-primary px-6 font-weight-bold">Search</a>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
											<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                                                        <thead class="" >
                                                        <tr>
                                                            <th>&nbsp;</th>
                                                            <th>No</th>
                                                            <th>Pegawai</th>
                                                            <th>Nama Pegawai</th>
                                                            <th>Tanggal</th>
                                                            <th>Jam Masuk</th>
                                                            <th>Jam Pulang</th>
                                                            <th>Jam Kerja</th>
                                                            <th>Keterangan</th> 
                                                            <th>Lokasi</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
                                                        </thead>
                                                         <tbody>
                                                            <tr v-for="(data,index) in absensipegawai" :key="data.id">
                                                                    <td>
                                                                        <label class="checkbox-wrap checkbox-success">
                                                                            <input type="checkbox">
                                                                            <span class="checkmark"></span>
                                                                        </label>
                                                                    </td>
                                                                    <td>{{index+1}} </td>
                                                                     <td>
                                                                        <div class="ms-3">
                                                                            <p class="fw-bold mb-1">{{ data.name }}</p>
                                                                            <p class="text-muted mb-0">{{ data.email }}</p>
                                                                        </div>
                                                                    </td>
                                                                    <td>{{ data.nama_lengkap }}</td>
                                                                    <td>{{ data.tanggal }}</td>
                                                                    <td>{{ data.jam_masuk }}</td>
                                                                    <td>{{ data.jam_pulang }}</td>
                                                                    <td>{{ data.jam_kerja }}</td>
                                                                     <td>
                                                                        <span class="badge badge-success" v-if="data.keterangan == 'On Time'" >{{data.keterangan}}</span>
                                                                        <span class="badge badge-danger" v-else-if="data.keterangan == 'Terlambat'" >{{data.keterangan}}</span>
                                                                    </td>
                                                                    <td>{{ data.lokasi }}</td>
                                                                   
                                                                    <td style="text-align: center;">
                                                                          <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-edit" data-toggle="modal" @click.prevent="showModalEdit(data)">
                                                                          </a>
                                                                       
                                                                    </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
                                </div>
                                
							</div>
                            
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
										<!--end::Card-->
									</div>
									<!--end::Content-->
								</div>
								<!--end::Teachers-->
							</div>
							<!--end::Container-->

					<!-- Modal Izin -->
<div class="modal fade" id="izin" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
																<div class="modal-content">
																	<div class="modal-header">
																		<h5 class="modal-title" id="izin">Ajukan Perizinan</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" @click="closeIzin()" class="ki ki-close"></i>
																		</button>
																	</div>
																	<div class="modal-body">
																		<div >
																			<form  class="form pt-9">
                                                                                   <div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Jenis Izin</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.jenis_izin" placeholder="Example : Sakit" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Tanggal Izin</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.tanggal" placeholder="Tanggal Akan Izin" type="date" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Bukti/Surat Pendukung</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input type="file" @change="upload" placeholder="Masukan File Surat Pendukung PDF/JPG" class="form-control form-control-lg form-control-solid">
																						 <span class="form-text text-muted">File Harus Pdf/Jpeg</span>
																					</div>
																						
																				</div>
																				
																				
													
																			</form>
                                                                               
																		</div>
																	</div>
																	<div class="modal-footer">
                                                                         <button type="button" @click="ajukanIzin()" data-dismiss="modal"  class="btn btn-primary font-weight-bold">Submit</button>
                                                                        <button type="button" @click="closeIzin()"  data-dismiss="modal" class="btn btn-primary font-weight-bold">Batal</button>

																	</div>
																</div>
															</div>
														</div>
					<!-- Modal Update Izin -->
<div class="modal fade" id="updateIzin" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
																<div class="modal-content">
																	<div class="modal-header">
																		<h5 class="modal-title" id="updateIzin">Update Perizinan</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" @click="closeEditIzin()" class="ki ki-close"></i>
																		</button>
																	</div>
																	<div class="modal-body">
																		<div >
																			<form  class="form pt-9">
                                                                                   <div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Jenis Izin</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.jenis_izin" placeholder="Example : Sakit" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Tanggal Izin</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.tanggal" placeholder="Tanggal Akan Izin" type="date" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Bukti/Surat Pendukung</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input type="file" @change="uploadupdate" placeholder="Masukan File Surat Pendukung PDF/JPG" class="form-control form-control-lg form-control-solid">
																						  <span class="form-text text-muted">File Harus Pdf/Jpeg</span>
																					</div>
																				</div>
																				
																				
													
																			</form>
                                                                               
																		</div>
																	</div>
																	<div class="modal-footer">
                                                                         <button type="button" @click="updateIzin()" data-dismiss="modal"  class="btn btn-primary font-weight-bold">Submit</button>
                                                                        <button type="button" @click="closeEditIzin()"  data-dismiss="modal" class="btn btn-primary font-weight-bold">Batal</button>

																	</div>
																</div>
															</div>
														</div>
			        <!-- Modal Request Absen -->
<div class="modal fade" id="reqAbsen" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
																<div class="modal-content">
																	<div class="modal-header">
																		<h5 class="modal-title" id="reqAbsen">Ajukan Request Attendance</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" @click="closeReq()" class="ki ki-close"></i>
																		</button>
																	</div>
																	<div class="modal-body">
																		<div >
																			<form  class="form pt-9">
                                                                                   <div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Alasan Pengajuan Request Attendance</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.alasan" placeholder="Masukan Alasan Masuk Akal" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Tanggal Request</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.tanggal_req" placeholder="Tanggal Request Attendance" type="date" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Bukti/Surat Pendukung</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input type="file" @change="uploadReq" placeholder="Masukan File Surat Pendukung PDF/JPG" class="form-control form-control-lg form-control-solid">
																						  <span class="form-text text-muted">File Harus Pdf/Jpeg</span>
																					</div>
																				</div>
																				
																				
													
																			</form>
                                                                               
																		</div>
																	</div>
																	<div class="modal-footer">
                                                                         <button type="button" @click="ajukanReq()" data-dismiss="modal"  class="btn btn-primary font-weight-bold">Submit</button>
                                                                        <button type="button" @click="closeReq()"  data-dismiss="modal" class="btn btn-primary font-weight-bold">Batal</button>

																	</div>
																</div>
															</div>
														</div>
					<!-- Modal Request Attendance Update -->
<div class="modal fade" id="updateReq" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
																<div class="modal-content">
																	<div class="modal-header">
																		<h5 class="modal-title" id="updateReq">Update Perizinan</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" @click="closeReqEdit()" class="ki ki-close"></i>
																		</button>
																	</div>
																	<div class="modal-body">
																		<div >
																			<form  class="form pt-9">
                                                                                   <div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Alasan</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.alasan" placeholder="Masukan Alasan Logis" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Tanggal Izin</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.tanggal_req" placeholder="Tanggal Request Attendance" type="date" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Bukti/Surat Pendukung</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input type="file" @change="uploadupdateReq" placeholder="Masukan File Surat Pendukung PDF/JPG" class="form-control form-control-lg form-control-solid">
																						  <span class="form-text text-muted">File Harus Pdf/Jpeg</span>
																					</div>
																				</div>
																				
																				
													
																			</form>
                                                                               
																		</div>
																	</div>
																	<div class="modal-footer">
                                                                         <button type="button" @click="updateReq()" data-dismiss="modal"  class="btn btn-primary font-weight-bold">Submit</button>
                                                                        <button type="button" @click="closeReqEdit()"  data-dismiss="modal" class="btn btn-primary font-weight-bold">Batal</button>

																	</div>
																</div>
															</div>
														</div>

                        
</template>


<script>

import LaravelVuePagination from 'laravel-vue-pagination';
export default {
    name: "Pengajuan",
	components: {
        'Pagination': LaravelVuePagination
    },
    data() {
        return {
			allizin:{},
            infopt:[],
			preview: null,
			allreqabsen:[],
			fileupload:null,
			 form: new Form ({
                id : "",
				uid: "",
				alasan: "",
				bukti_pendukung:"",
				tanggal_req:"",
                jenis_izin : "",
                tanggal : "",
                bukti : "",
            }),
            token: localStorage.getItem("token"),
            role: localStorage.getItem('role'),
        }
    },
    methods:{
		upload(e){
			let files = e.target.files[0]
			this.preview = URL.createObjectURL(files)
			this.form.bukti = files
		},
		uploadupdate(e){
			let files = e.target.files[0]
			this.preview = URL.createObjectURL(files)
			this.form.bukti = files
		},
		uploadReq(e){
			let files = e.target.files[0]
			this.preview = URL.createObjectURL(files)
			this.form.bukti_pendukung = files
		},
		uploadupdateReq(e){
			let files = e.target.files[0]
			this.preview = URL.createObjectURL(files)
			this.form.bukti_pendukung = files
		},
		  onChange(e) {
                this.file = e.target.files[0];
            },
		//IZIN
		izinModal(){
		$("#izin").modal("show");
		},
		closeIzin(){
		 $("#izin").modal("hide");
		 this.form.reset()
		},
		editIzinModal(data){
		$("#updateIzin").modal("show");
		 this.form.fill(data);
		},
		closeEditIzin(){
		$("#updateIzin").modal("hide");
		},

		//Request Attendance
		reqModal(){
		$("#reqAbsen").modal("show");
		},
		editReqModal(data){
		$("#updateReq").modal("show");
		 this.form.fill(data);
		},
		closeReq(){
		this.form.reset();
        $('#reqAbsen').modal('hide')
		},
		closeReqEdit(){
		$("#updateReq").modal("hide");
		},
		//METHOD PENGAJUAN IZIN CRUD
		updateIzin(){
			const formData = new FormData()
            formData.set('bukti', this.form.bukti)
            this.form.post('/api/updateizin', 
			
			{
                headers : { Authorization: "Bearer " + this.token },
            },
			{
				
                    id: this.form.id,
                    jenis_izin: this.form.jenis_izin,
                    tanggal: this.form.tanggal,
					bukti: this.form.bukti,
                
			},formData,
			).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Update Perizinan ",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $('#updateIzin').modal('hide')
                    this.allIzinPegawai()
                }
                    
                    }
                )
		},
		ajukanIzin(){
			 const formData = new FormData()
            formData.set('bukti', this.form.bukti)
            this.form.post('/api/ajukanizin', 
			{
                headers : { Authorization: "Bearer " + this.token },
            },formData,
			).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Mengajukan Perizinan ",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $('#izin').modal('hide')
                    this.allIzinPegawai()
                }
                    
                    }
                )


		},

		hapusIzin(id){
		 this.$axios.get('/sanctum/csrf-cookie').then(response => {
            Swal.fire({
            title: 'Hapus Perizinan ?',
            text: "Anda tidak akan bisa mengembalikannya lagi!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#1BC5BD',
            cancelButtonColor: '',
            confirmButtonText: 'Hapus',
            cancelButtonText: 'Batal',
            }).then((result) => {
                 if (result.isConfirmed) {
                 axios.delete('/api/hapusizin/'+id,  {
                headers: { Authorization: "Bearer " + this.token },
                },
                )
                  Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menghapus Perizinan",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    };
                    this.allIzinPegawai()

            },

            )

            })	

		},
		//METHOD PENGAJUAN REQUEST ATTENDANCE
		updateReq(){
			const formData = new FormData()
            formData.set('bukti_pendukung', this.form.bukti_pendukung)
            this.form.post('/api/updatereqabsen', 
			
			{
                headers : { Authorization: "Bearer " + this.token },
            },
			{
				
                    uid: this.form.uid,
                    alasan: this.form.alasan,
                    tanggal_req: this.form.tanggal_req,
					bukti_pendukung: this.form.bukti_pendukung
                
			},formData,
			).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Update Request Attendance ",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $('#updateReq').modal('hide')
                    this.allReqPegawai()
                }
                    
                    }
                )
		},
		hapusReq(uid){
		 this.$axios.get('/sanctum/csrf-cookie').then(response => {
            Swal.fire({
            title: 'Hapus Request Attendance ?',
            text: "Anda tidak akan bisa mengembalikannya lagi!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#1BC5BD',
            cancelButtonColor: '',
            confirmButtonText: 'Hapus',
            cancelButtonText: 'Batal',
            }).then((result) => {
                 if (result.isConfirmed) {
                 axios.delete('/api/hapusreqabsen/'+uid,  {
                headers: { Authorization: "Bearer " + this.token },
                },
                )
                  Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menghapus Request Attendance",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    };
                    this.allReqPegawai()

            },

            )

            })	

		},
		ajukanReq(){
			 const formData = new FormData()
            formData.set('bukti_pendukung', this.form.bukti_pendukung)
            this.form.post('/api/ajukanreqabsen', 
			{
                headers : { Authorization: "Bearer " + this.token },
            },formData,
			).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Mengajukan Request Attendance ",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $('#reqAbsen').modal('hide')
                    this.allReqPegawai()
                }
                    
                    }
                )


		},
		//METHOD MENAMPILKAN PEGAWAI
		allIzinPegawai(page = 1){
			 this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/allizinpegawai?page=' + page,{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.allizin = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })

		},
			allReqPegawai(){
			 this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/allreqpegawai',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.allreqabsen = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })

		},
         getpt(){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/infopt',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.infopt = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })
        },
        
    },
    
 mounted () {
           this.getpt();
		   this.allIzinPegawai();
		   this.allReqPegawai();
    }

}


</script>
